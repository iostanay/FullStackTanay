{% extends "base.html" %}

{% block title %}Contact - Tanay Bhattacharjee{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center hero-content">
                <h1 class="section-title">Get In Touch</h1>
                <p class="section-subtitle">Let's discuss your next iOS project</p>
            </div>
        </div>
    </div>
</section>

<!-- Contact Content -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h4 class="card-title mb-4">Contact Information</h4>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-envelope text-white"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Email</h6>
                                        <p class="text-muted mb-0">{{ developer.email }}</p>
                                    </div>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-phone text-white"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Phone</h6>
                                        <p class="text-muted mb-0">{{ developer.phone }}</p>
                                    </div>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fas fa-map-marker-alt text-white"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Location</h6>
                                        <p class="text-muted mb-0">{{ developer.location }}</p>
                                    </div>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fab fa-github text-white"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">GitHub</h6>
                                        <p class="text-muted mb-0">{{ developer.github }}</p>
                                    </div>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-3" 
                                         style="width: 40px; height: 40px;">
                                        <i class="fab fa-linkedin text-white"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">LinkedIn</h6>
                                        <p class="text-muted mb-0">{{ developer.linkedin }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h4 class="card-title mb-4">Send a Message</h4>
                                <form id="contactForm">
                                    <div class="mb-3">
                                        <label for="name" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="name" name="name" placeholder="Your name" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" name="email" placeholder="your.email@example.com" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="message" class="form-label">Message</label>
                                        <textarea class="form-control" id="message" name="message" rows="5" placeholder="Tell me about your project..." required></textarea>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary w-100" id="submitBtn">
                                        <i class="fas fa-paper-plane me-2"></i>Send Message
                                    </button>
                                    
                                    <div id="formMessage" class="mt-3" style="display: none;"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Offered -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center mb-5">
                <h2 class="section-title">Services I Offer</h2>
                <p class="text-muted">Comprehensive iOS development solutions</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 60px; height: 60px;">
                            <i class="fas fa-mobile-alt text-white"></i>
                        </div>
                        <h5>iOS App Development</h5>
                        <p class="text-muted">Complete iOS application development from concept to App Store launch</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Custom UI/UX Design</li>
                            <li><i class="fas fa-check text-success me-2"></i>Native iOS Development</li>
                            <li><i class="fas fa-check text-success me-2"></i>App Store Optimization</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 60px; height: 60px;">
                            <i class="fas fa-cogs text-white"></i>
                        </div>
                        <h5>App Maintenance</h5>
                        <p class="text-muted">Ongoing support and maintenance for existing iOS applications</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Bug Fixes & Updates</li>
                            <li><i class="fas fa-check text-success me-2"></i>Performance Optimization</li>
                            <li><i class="fas fa-check text-success me-2"></i>Feature Enhancements</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                             style="width: 60px; height: 60px;">
                            <i class="fas fa-users text-white"></i>
                        </div>
                        <h5>Consultation</h5>
                        <p class="text-muted">Technical consultation and guidance for iOS projects</p>
                        <ul class="list-unstyled text-start">
                            <li><i class="fas fa-check text-success me-2"></i>Architecture Review</li>
                            <li><i class="fas fa-check text-success me-2"></i>Code Review</li>
                            <li><i class="fas fa-check text-success me-2"></i>Best Practices</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Response Time -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <div class="card">
                    <div class="card-body">
                        <h3 class="mb-3">Quick Response Time</h3>
                        <p class="text-muted mb-4">
                            I typically respond to inquiries within 24 hours. For urgent matters, 
                            feel free to reach out via phone or email.
                        </p>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="text-center">
                                    <div class="stats-number text-primary">24h</div>
                                    <div class="stats-label">Response Time</div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="text-center">
                                    <div class="stats-number text-primary">100%</div>
                                    <div class="stats-label">Client Satisfaction</div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="text-center">
                                    <div class="stats-number text-primary">Free</div>
                                    <div class="stats-label">Initial Consultation</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contactForm');
    const submitBtn = document.getElementById('submitBtn');
    const formMessage = document.getElementById('formMessage');
    
    contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Get form data
        const formData = new FormData(contactForm);
        const name = formData.get('name').trim();
        const email = formData.get('email').trim();
        const message = formData.get('message').trim();
        
        console.log('Form validation - Name:', name, 'Email:', email, 'Message:', message);
        
        // Enhanced validation
        if (!name) {
            showMessage('Please enter your name', 'error');
            highlightField('name', true);
            document.getElementById('name').focus();
            return;
        }
        
        if (!email) {
            showMessage('Please enter your email address', 'error');
            highlightField('email', true);
            document.getElementById('email').focus();
            return;
        }
        
        // Basic email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            showMessage('Please enter a valid email address', 'error');
            highlightField('email', true);
            document.getElementById('email').focus();
            return;
        }
        
        if (!message) {
            showMessage('Please enter your message', 'error');
            highlightField('message', true);
            document.getElementById('message').focus();
            return;
        }
        
        if (message.length < 10) {
            showMessage('Please enter a message with at least 10 characters', 'error');
            highlightField('message', true);
            document.getElementById('message').focus();
            return;
        }
        
        // Clear any previous field highlights
        highlightField('name', false);
        highlightField('email', false);
        highlightField('message', false);
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
        
        try {
            console.log('Sending contact form data:', { name, email, message });
            
            // Send to API
            const response = await fetch('/api/contacts', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    name: name,
                    email: email,
                    message: message
                })
            });
            
            console.log('Response status:', response.status);
            console.log('Response headers:', response.headers);
            
            const result = await response.json();
            console.log('Response data:', result);
            
            if (response.ok) {
                showMessage('Message sent successfully! I\'ll get back to you soon.', 'success');
                contactForm.reset();
            } else {
                showMessage(result.error || 'Failed to send message. Please try again.', 'error');
            }
        } catch (error) {
            console.error('Fetch error:', error);
            showMessage('Network error. Please try again.', 'error');
        } finally {
            // Reset button state
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane me-2"></i>Send Message';
        }
    });
    
    function showMessage(message, type) {
        formMessage.textContent = message;
        formMessage.className = `alert alert-${type === 'success' ? 'success' : 'danger'} mt-3`;
        formMessage.style.display = 'block';
        
        // Scroll to message
        formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Auto-hide after 8 seconds for errors, 5 seconds for success
        const hideTime = type === 'error' ? 8000 : 5000;
        setTimeout(() => {
            formMessage.style.display = 'none';
        }, hideTime);
        
        console.log(`${type.toUpperCase()}: ${message}`);
    }
    
    function highlightField(fieldId, isError) {
        const field = document.getElementById(fieldId);
        if (field) {
            if (isError) {
                field.classList.add('is-invalid');
                field.classList.remove('is-valid');
            } else {
                field.classList.remove('is-invalid');
                field.classList.add('is-valid');
            }
        }
    }
});
</script>
{% endblock %} 